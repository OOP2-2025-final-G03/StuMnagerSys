{% extends active_template %}

{% block extra_css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}

{% block page_title %}プロフィール{% endblock %}

{% block main_content %}
    <div style="margin-bottom: 24px;">
        <h2 style="margin:0; font-size:1.25rem; font-weight:700; color:var(--text-main);">プロフィール</h2>
        <p style="margin:4px 0 0; font-size:0.875rem; color:var(--text-sub);">登録情報の確認・編集</p>
    </div>

    <div class="profile-container">
        
        <aside class="profile-sidebar">
            <div class="profile-card user-overview">
                <div class="large-avatar">
                    {{ user.name[0] }}
                </div>
                
                <h3 class="profile-name">{{ user.name }}</h3>
                <p class="profile-id">ID: {{ user.id }}</p>
                
                <span class="profile-role-badge bg-role-admin">
                    {{ user.role | upper }}
                </span>

                <div class="profile-divider"></div>

                <div class="info-row">
                    <span class="info-label">最終ログイン</span>
                    <span class="info-value">{{ user.last_login_date }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">IPアドレス</span>
                    <span class="info-value" style="font-family: monospace;">{{ user.last_login_ip }}</span>
                </div>
            </div>
        </aside>

        <div class="profile-content">
            <div class="profile-card user-details">
                <h3 class="section-title">基本情報</h3>
                
                <form>
                    <div class="form-grid">
                        <div class="form-group form-full">
                            <label class="form-label">氏名</label>
                            <input type="text" class="form-input" value="{{ user.name }}" disabled>
                        </div>

                        <div class="form-group">
                            <label class="form-label">所属 (学部/学科)</label>
                            <input type="text" class="form-input" value="{{ user.department }}" disabled>
                        </div>

                        <div class="form-group">
                            <label class="form-label">学年</label>
                            <input type="text" class="form-input" value="{{ user.grade }}" disabled>
                        </div>

                        <div class="form-group">
                            <label class="form-label">生年月日</label>
                            <input type="text" class="form-input" value="{{ user.birth_date }}" disabled>
                        </div>

                        <div class="form-group">
                            <label class="form-label">性別</label>
                            <input type="text" class="form-input" value="{{ user.gender }}" disabled>
                        </div>
                    </div>

                    <div class="profile-divider"></div>

                    <h3 class="section-title">セキュリティ设定</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">新しいパスワード</label>
                            <input type="password" class="form-input" placeholder="変更する場合のみ入力">
                        </div>
                        <div class="form-group">
                            <label class="form-label">パスワード確認</label>
                            <input type="password" class="form-input" placeholder="もう一度入力">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-cancel" onclick="history.back()">戻る</button>
                        <button type="submit" class="btn-save">変更を保存</button>
                    </div>
                </form>
            </div>
        </div>

    </div>
{% endblock %}